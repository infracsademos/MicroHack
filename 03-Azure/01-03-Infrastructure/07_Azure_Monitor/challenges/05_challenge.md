# Challenge 5: Collect custom text logs with Azure Monitor Agent

Azure Monitor allows you to collect logs from various sources, including custom logs. Custom logs are logs that are generated by your own applications or services and can be collected using the Azure Monitor agent. You can configure the agent to collect logs from specific files or directories on your virtual machines or from specific event logs on Windows machines. Once collected, you can analyze and query the logs using Azure Monitor Log Analytics.

## Goal

After completing this challenge, you should be able to capture custom logs from your Windows virtual machine in Azure Log Analytics.

## Actions

### Task 1

- Create a custom table named `MH_MONITORING_CL` inside Azure Log Analytics workspace `law-microhack`.

### Task 2

- Generate sample logs on your virutal machine.
- Find a sample script in `./resources/scripts/generate-logs.ps1`

### Task 3

- Create a `Data Collection Endpoint` and a `Data Collection Rule` to gather text logs from the virtual machine `vm-windows`

### Task 4

- Verify custom table `MH_MONITORING_CL` and logs are gather in Log Analytics workspace `law-microhack`.

### Learning Resources

- [Collect text logs with Azure Monitor Agent](https://learn.microsoft.com/en-us/azure/azure-monitor/agents/data-collection-text-log?tabs=portal)
- [Add or delete tables and columns in Azure Monitor Logs](https://learn.microsoft.com/en-us/azure/azure-monitor/logs/create-custom-table?tabs=azure-portal-1%2Cazure-portal-2%2Cazure-portal-3)

## Success Criteria

- Custom table `MH_MONITORING_CL` was created
- Data Collection Rule gathers custom text logs from `vm-windows`
- Run example query in `law-microhack` demonstrating succesfull collection of custom logs.

### Congrats :partying_face:

You finished the MicroHack for monitoring virutal machines in Azure Monitor.
